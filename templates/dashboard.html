{% extends "base.html" %}
{% block content %}

<div class="container my-4">
  <h2 class="mb-4">ðŸ“¦ Order Summary</h2>


  {% if orders %}
  <div class="list-group">
    {% for order in orders %}
    <div class="list-group-item">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <strong>Order #{{ order.id }}</strong>

          {% if order.id == current_user.active_cart_id and not order.completed %}
          <span class="badge bg-primary ms-2">âœ… Active Cart</span>
          {% endif %}
        </div>

        {% if order.completed %}
        <span class="badge bg-success">Completed</span>
        {% else %}
        {% if order.id != current_user.active_cart_id %}
        <a href="{{ url_for('cart.switch_pending_order', order_id=order.id) }}"
          class="btn btn-sm btn-outline-secondary">Switch to This</a>
        {% else %}
        <a href="" class="btn btn-sm btn-outline-primary">Active Cart</a>
        {% endif %}
        {% endif %}
      </div>

      <small class="text-muted">Created: {{ order.created.strftime('%Y-%m-%d %H:%M') }}</small>

      <ul class="mt-2">
        {% for item in order.items %}
        <li>{{ item.quantity }} x {{ item.product.name }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info">You don't have any orders yet.</div>
  {% endif %}
</div>

{% endblock %}