{% extends "base.html" %}

{% block pagetitle %}
Admin Dashboard
{% endblock %}

{% block content %}
<h2 class="my-3">Admin Dashboard</h2>

<div class="mb-3">
  <a href="{{ url_for('admin.turn_all_out_of_season') }}" class="btn btn-warning">Turn All Products Out of Season</a>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Product</th>
      <th>Category</th>
      <th>In Season?</th>
      <th>Toggle</th>
    </tr>
  </thead>
  <tbody>
    {% for product in products %}
    <tr>
      <td>{{ product.name }}</td>
      <td>{{ product.category.name }}</td>
      <td>{{ "✅" if product.in_season else "❌" }}</td>
      <td>
        <a href="{{ url_for('admin.toggle_season', product_id=product.id) }}"
          class="btn btn-sm {{ 'btn-success' if not product.in_season else 'btn-danger' }}">
          {% if product.in_season %}
          Remove
          {% else %}
          Add
          {% endif %}
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}