<!DOCTYPE html>
<html>
  <head>
    <title>{% block pagetitle %}Store{% endblock %}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="container">
      <header class="d-flex justify-content-center py-3">
        <ul class="nav nav-tabs nav-fill">
          <li class="nav-item">
            <a
              href="{{ url_for('home_page') }}"
              class="nav-link {% if request.endpoint == 'home_page' %}active{% endif %}"
            >
              Home
            </a>
          </li>
          <li class="nav-item">
            <a
              href="{{ url_for('customers.customers_detail') }}"
              class="nav-link {% if request.endpoint == 'customers.customers_detail' %}active{% endif %}"
            >
              Customers
            </a>
          </li>
          <li class="nav-item">
            <a
              href="{{ url_for('products.all_products_page') }}"
              class="nav-link {% if request.endpoint == 'products.all_products_page' %}active{% endif %}"
            >
              Products
            </a>
          </li>
          <li class="nav-item">
            <a
              href="{{ url_for('orders.orders_page') }}"
              class="nav-link {% if request.endpoint == 'orders.orders_page' %}active{% endif %}"
            >
              Orders
            </a>
          </li>
          <li class="nav-item d-flex">
            <a
              href="{{ url_for('categories.categories_page') }}"
              class="nav-link {% if request.endpoint == 'categories.categories_page' %}active{% endif %}"
            >
              Categories
            </a>
            <a
              href="#"
              class="nav-link dropdown-toggle"
              data-bs-toggle="dropdown"
            ></a>
            <ul class="dropdown-menu">
              {% for category in categories %}
              <li>
                <!-- For each category, if you need an active class you might compare a parameter passed to the template -->
                <a
                  class="dropdown-item {% if request.endpoint == 'category_detail' and request.view_args.name == category.name %}active{% endif %}"
                  href="{{ url_for('categories.category_detail', name=category.name) }}"
                >
                  {{ category.name }}
                </a>
              </li>
              {% endfor %}
            </ul>
          </li>
        </ul>
      </header>
      <div class="text-start">
        {% if current_user.is_authenticated %} Logged in as {{ current_user.name
        }}
        <a href="{{ url_for('logout') }}" class="btn btn-outline-danger btn-sm"
          >Logout</a
        >
        <a href="{{ url_for('cart.view_cart') }}">View Cart</a>
        {% else %}
        <a
          href="{{ url_for('login_page') }}"
          class="btn btn-outline-primary btn-sm me-2"
          >Login</a
        >
        {% endif %}
      </div>

      {% block content %}
      <h1>Welcome to the Only MVP Store</h1>
      {% endblock %}
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
